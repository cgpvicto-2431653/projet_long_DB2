<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Commander une pizza</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

<h2>Faire une commande</h2>

<form method="POST">

    <h3>Client</h3>

    <label>Nom :</label><br>
    <input type="text" name="nom" required><br>

    <label>Téléphone :</label><br>
    <input type="text" name="telephone" required><br>

    <label>Adresse :</label><br>
    <input type="text" name="adresse" required><br>

    <h3>Pizza</h3>

    <label>Crôute :</label><br>
    <select name="croute">
        {% for c in croutes %}
        <option value="{{ c.id }}">{{ c.nom }}</option>
        {% endfor %}
    </select><br>

    <label>Sauce :</label><br>
    <select name="sauce">
        {% for s in sauces %}
        <option value="{{ s.id }}">{{ s.nom }}</option>
        {% endfor %}
    </select><br>

    <label>Garnitures (max 4) :</label><br>
    {% for g in garnitures %}
        <input type="checkbox" name="garnitures" value="{{ g.id }}"> {{ g.nom }}<br>
    {% endfor %}

    <br>
    <button type="submit">Commander</button>
    <div>
        <a href="/">Retour</a>
    </div>
</form>


<script>
document.addEventListener("DOMContentLoaded", function () {
    const checkboxes = document.querySelectorAll("input[name='garnitures']");
    checkboxes.forEach(cb => {
        cb.addEventListener("change", function () {
            let checked = document.querySelectorAll("input[name='garnitures']:checked").length;
            if (checked > 4) {
                alert("Maximum 4 garnitures !");
                this.checked = false;
            }
        });
    });
});
</script>

</body>
</html>
